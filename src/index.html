<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <link rel="manifest" href="/mosic/manifest.json">
    <title>Mosic</title>

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Catamaran:wght@300&display=swap" rel="stylesheet"> 

    <link rel="stylesheet" href="/mosic//css/styles.css">

  </head>
  <body>


    <header>
      <h1>
        <a href="/" data-mosic-link data-target="/">Mosic</a>
      </h1>
      <mosic-player></mosic-player>

    </header>

      <mosic-router></mosic-router>

    <script type="module">

      import BaseComponent from '/mosic/js/base-component.js';
      window.BaseComponent = BaseComponent;

      // Queue microtask polyfill
      if (typeof window.queueMicrotask !== "function") {
        window.queueMicrotask = function (callback) {
          Promise.resolve()
            .then(callback)
            .catch(e => setTimeout(() => { throw e; })); // report exceptions
        };
      }

      /*
      const player = new Audio();
      player.src = '/music/La Maravillosa Orquesta del Alcohol/Todavia no ha salido la luna/1932.mp3';
      player.play().catch(console.log);
      player.pause();
      player.src = '/music/La Maravillosa Orquesta del Alcohol/Todavia no ha salido la luna/Amanecederos.mp3';
      player.play().catch(console.log);
      player.addEventListener('ended', (event) => {
        console.log('Video stopped either because 1) it was over, ' +
            'or 2) no further data is available.');
      });
      */
      
      import MosicRouter from '/mosic/js/router.js';
      customElements.define('mosic-router', MosicRouter);

      import AlbumList from '/mosic/js/album-list.js';
      import AlbumFull from '/mosic/js/album-full.js';
      import PlaylistView from '/mosic/js/playlist-view.js';
      import QueueView from '/mosic/js/queue-view.js';
      import TestTest from '/mosic/js/test-test.js';
      import MosicPlayer from '/js/mosic-player.js';
      customElements.define('album-list', AlbumList);
      customElements.define('album-full', AlbumFull);
      customElements.define('playlist-view', PlaylistView);
      customElements.define('queue-view', QueueView);
      customElements.define('mosic-player', MosicPlayer);
      customElements.define('test-test', TestTest);


    </script>

  </body>
</html>
